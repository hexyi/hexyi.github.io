<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="hexyi"><title>基于Dockfile搭建公共开发环境 · HEXYI</title><meta name="description" content="环境包准备Oracle JDK1wget --no-check-certificate --no-cookies --header &amp;quot;Cookie: oraclelicense=accept-securebackup-cookie&amp;quot;  -P /Users/hexy/Downloa"><meta name="keywords" content="Hexo,HTML,hexyi,CSS,android,Linux,Java、移动互联网、项目管理、软件架构"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">HEXYI</a></h3><div class="description"><p>思考感悟</p></div></div></div><ul class="social-links"><li><a href="https://twitter.com/hexyii"><i class="fa fa-twitter"></i></a></li><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai</a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/uploads/avatar.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>基于Dockfile搭建公共开发环境</a></h3></div><div class="post-content"><h2 id="环境包准备">环境包准备</h2><h3 id="Oracle_JDK">Oracle JDK</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate --no-cookies --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot;  -P /Users/hexy/Downloads http://download.oracle.com/otn-pub/java/jdk/8u111-b14/jdk-8u111-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="Tomcat">Tomcat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -P /Users/hexy/Downloads http://mirrors.hust.edu.cn/apache/tomcat/tomcat-8/v8.5.11/bin/apache-tomcat-8.5.11.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="Maven">Maven</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -P /Users/hexy/Downloads  http://apache.fayea.com/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz</span><br></pre></td></tr></table></figure>
<h2 id="创建Dockerfile">创建Dockerfile</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#基础镜像</span><br><span class="line">FROM centos</span><br><span class="line">#维护人员信息</span><br><span class="line">MAINTAINER hexyi &quot;hexyi.io@gmail.com&quot;</span><br><span class="line"></span><br><span class="line">#设置工作目录，这个命令是用来切换工作目录的，相当于cd命令</span><br><span class="line">WORKDIR /home</span><br><span class="line"></span><br><span class="line">#安装JDK</span><br><span class="line"></span><br><span class="line">#创建JDK目录，等一下的JDK安装到这个目录</span><br><span class="line"></span><br><span class="line">RUN mkdir JDK</span><br><span class="line"></span><br><span class="line">#上篇文章中已经下载了jdk，为了节省时间我这里使用COPY命令将宿主机中的jdk压缩包复制到镜像中，这样做存在的问题是使用Dockerfile创建镜像的宿主机必须在对应的路</span><br><span class="line"></span><br><span class="line">#径下有这个包。我这里的包和Dockerfile文件在同一个目录下，源文件的路径需要是Dockerfile文件所在目录(上下文根目录)的相对路径</span><br><span class="line"></span><br><span class="line">#也可以使用wget、 apt-get等命令在线下载</span><br><span class="line"></span><br><span class="line">COPY jdk-8u111-linux-x64.tar.gz /home/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#解压复制到镜像中的jdk压缩包，完成后删除，RUN命令可以使用 &amp;&amp; 将两条命令放到一起，减少镜像的层数</span><br><span class="line"></span><br><span class="line">RUN tar zxf /home/jdk-8u111-linux-x64.tar.gz -C /home/JDK &amp;&amp; rm -rf /home/jdk-8u111-linux-x64.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#设置环境变量</span><br><span class="line">ENV JAVA_HOME /home/JDK/jdk1.8.0_111</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class="line"></span><br><span class="line">#安装tomcat，同JDK</span><br><span class="line">RUN mkdir Tomcat</span><br><span class="line">COPY apache-tomcat-8.5.11.tar.gz /home/</span><br><span class="line">RUN tar zxf /home/apache-tomcat-8.5.11.tar.gz -C /home/Tomcat &amp;&amp; rm -rf /home/apache-tomcat-8.5.11.tar.gz</span><br><span class="line"></span><br><span class="line">#暴露tomcat的内部端口，如果没有修改tomcat的配置文件的话，默认是8080端口</span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#启动容器时，执行脚本文件启动Tomcat并持续输出日志，防止容器退出。</span><br><span class="line">ENTRYPOINT /home/Tomcat/apache-tomcat-8.5.11/bin/startup.sh &amp;&amp; tail -f /home/Tomcat/apache-tomcat-8.5.11/logs/catalina.out</span><br></pre></td></tr></table></figure>
<h2 id="用Dockerfile构建镜像">用Dockerfile构建镜像</h2><h3 id="执行命令构建镜像">执行命令构建镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t hexyi/tomcat .</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-t的意思是将后面的内容作为构建镜像的标签，方便记忆跟检索，好像不允许大写字母。</p>
<p>/home/是指Dockerfile文件在这个目录下，如果Dockerfile文件在执行命令的当前目录可以用英文句号.表示</p>
</blockquote>
<p>构建过程如下图，每执行一条命令都会生成一个镜像并缓存：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">hexydeMacBook-Pro:docker-learn hexy$ docker build -t hexyi/tomcat .</span><br><span class="line">Sending build context to Docker daemon 190.7 MB</span><br><span class="line">Step 1/13 : FROM centos</span><br><span class="line"> ---&gt; 67591570dd29</span><br><span class="line">Step 2/13 : MAINTAINER hexyi &quot;hexyi.io@gmail.com&quot;</span><br><span class="line"> ---&gt; Running in e6ab358128a5</span><br><span class="line"> ---&gt; fe89622b1b71</span><br><span class="line">Removing intermediate container e6ab358128a5</span><br><span class="line">Step 3/13 : WORKDIR /home</span><br><span class="line"> ---&gt; d20b5e1fe4f9</span><br><span class="line">Removing intermediate container f2a8dc12cb4c</span><br><span class="line">Step 4/13 : RUN mkdir JDK</span><br><span class="line"> ---&gt; Running in 65cd4bdb64ec</span><br><span class="line"> ---&gt; 49049349a704</span><br><span class="line">Removing intermediate container 65cd4bdb64ec</span><br><span class="line">Step 5/13 : COPY jdk-8u111-linux-x64.tar.gz /home/</span><br><span class="line"> ---&gt; 23e0cbbf4eeb</span><br><span class="line">Removing intermediate container 27a30929e366</span><br><span class="line">Step 6/13 : RUN tar zxf /home/jdk-8u111-linux-x64.tar.gz -C /home/JDK &amp;&amp; rm -rf /home/jdk-8u111-linux-x64.tar.gz</span><br><span class="line"> ---&gt; Running in f7704773cb72</span><br><span class="line"> ---&gt; ae1109697ec8</span><br><span class="line">Removing intermediate container f7704773cb72</span><br><span class="line">Step 7/13 : ENV JAVA_HOME /home/JDK/jdk1.8.0_111</span><br><span class="line"> ---&gt; Running in 9830acd34674</span><br><span class="line"> ---&gt; 2aead7f198f9</span><br><span class="line">Removing intermediate container 9830acd34674</span><br><span class="line">Step 8/13 : ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class="line"> ---&gt; Running in 63257a2242da</span><br><span class="line"> ---&gt; 728bb768259b</span><br><span class="line">Removing intermediate container 63257a2242da</span><br><span class="line">Step 9/13 : RUN mkdir Tomcat</span><br><span class="line"> ---&gt; Running in ca229c9baa58</span><br><span class="line"> ---&gt; 371371fd1d7c</span><br><span class="line">Removing intermediate container ca229c9baa58</span><br><span class="line">Step 10/13 : COPY apache-tomcat-8.5.11.tar.gz /home/</span><br><span class="line"> ---&gt; 52633e7abfdf</span><br><span class="line">Removing intermediate container 53d072f30800</span><br><span class="line">Step 11/13 : RUN tar zxf /home/apache-tomcat-8.5.11.tar.gz -C /home/Tomcat &amp;&amp; rm -rf /home/apache-tomcat-8.5.11.tar.gz</span><br><span class="line"> ---&gt; Running in e1ab6c82ad2b</span><br><span class="line"> ---&gt; 27f989f869be</span><br><span class="line">Removing intermediate container e1ab6c82ad2b</span><br><span class="line">Step 12/13 : EXPOSE 8080</span><br><span class="line"> ---&gt; Running in fadd8f7104d6</span><br><span class="line"> ---&gt; 2e24adca5996</span><br><span class="line">Removing intermediate container fadd8f7104d6</span><br><span class="line">Step 13/13 : ENTRYPOINT /home/Tomcat/apache-tomcat-8.5.11/bin/startup.sh &amp;&amp; tail -f /home/Tomcat/apache-tomcat-8.5.11/logs/catalina.out</span><br><span class="line"> ---&gt; Running in b9b4edaa51c6</span><br><span class="line"> ---&gt; a4e50aa7c25c</span><br><span class="line">Removing intermediate container b9b4edaa51c6</span><br><span class="line">Successfully built a4e50aa7c25c</span><br></pre></td></tr></table></figure>
<h3 id="使用sudo_docker_images_-a可以查看到这些缓存的镜像。">使用sudo docker images -a可以查看到这些缓存的镜像。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">hexydeMacBook-Pro:docker-learn hexy$ docker images -a</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE</span><br><span class="line">hexyi/tomcat        latest              a4e50aa7c25c        About a minute ago   761 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              2e24adca5996        About a minute ago   761 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              27f989f869be        About a minute ago   761 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              52633e7abfdf        About a minute ago   748 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              371371fd1d7c        About a minute ago   739 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              728bb768259b        About a minute ago   739 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              2aead7f198f9        About a minute ago   739 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              ae1109697ec8        About a minute ago   739 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              23e0cbbf4eeb        About a minute ago   373 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              49049349a704        2 minutes ago        192 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              d20b5e1fe4f9        2 minutes ago        192 MB</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              fe89622b1b71        2 minutes ago        192 MB</span><br></pre></td></tr></table></figure>
<h3 id="查看所有容器状态">查看所有容器状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexydeMacBook-Pro:docker-learn hexy$ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                   PORTS               NAMES</span><br><span class="line">59f62ffe5a41        docker.io/learn/tutorial   &quot;/bin/bash&quot;              6 weeks ago         Exited (0) 6 weeks ago                       tutorial</span><br><span class="line">4a0745e1361f        learn/ping                 &quot;ping www.baidu.com&quot;     6 weeks ago         Exited (0) 6 weeks ago                       compassionate_ritchie</span><br><span class="line">4d3f84fcc741        learn/ping                 &quot;ping www.google.com&quot;    6 weeks ago         Exited (0) 6 weeks ago                       trusting_bhabha</span><br><span class="line">10cb35023177        learn/tutorial             &quot;apt-get install -...&quot;   6 weeks ago         Exited (0) 6 weeks ago                       stupefied_pare</span><br><span class="line">5fafecfe8507        learn/tutorial             &quot;echo &apos;hello world&apos;&quot;     6 weeks ago         Exited (0) 6 weeks ago                       boring_hawking</span><br></pre></td></tr></table></figure>
<h3 id="运行镜像，将宿主机的8081端口映射到窗口的8080也就是tomcat监听的端口，这样直接访问宿主机就可以访问到tomcat的主页了。">运行镜像，将宿主机的8081端口映射到窗口的8080也就是tomcat监听的端口，这样直接访问宿主机就可以访问到tomcat的主页了。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name tomcat8 -p 8081:8080 hexyi/tomcat /bin/bash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-it 交互模式,前台启动<br>-d   后端其动，返回id号<br>-p   小p，如果用 9999:22，重启后还是用指定端口映射，如果占用，报错<br>-P    大P,自动找无人使用的端口映射，如果服务器重启，就会随机用个别的端口映射<br>–name 给容器取个名字<br>hexyi/tomcat 用哪个镜像启动容器，如果容器在本地不存在，则远程pull,找不到则报错<br>/bin/bash  container可以在启动时自动执行shell，然后启动其它进程</p>
</blockquote>
<p>由于增加了输出tomcat日志的指令，可以看到如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">hexydeMacBook-Pro:docker-learn hexy$ docker run -it --name tomcat8 -p 8081:8080 hexyi/tomcat /bin/bash</span><br><span class="line">Using CATALINA_BASE:   /home/Tomcat/apache-tomcat-8.5.11</span><br><span class="line">Using CATALINA_HOME:   /home/Tomcat/apache-tomcat-8.5.11</span><br><span class="line">Using CATALINA_TMPDIR: /home/Tomcat/apache-tomcat-8.5.11/temp</span><br><span class="line">Using JRE_HOME:        /home/JDK/jdk1.8.0_111</span><br><span class="line">Using CLASSPATH:       /home/Tomcat/apache-tomcat-8.5.11/bin/bootstrap.jar:/home/Tomcat/apache-tomcat-8.5.11/bin/tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br><span class="line">27-Feb-2017 07:36:03.451 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/8.5.11</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Jan 10 2017 21:02:52 UTC</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.5.11.0</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Linux</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            4.9.8-moby</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             /home/JDK/jdk1.8.0_111/jre</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_111-b14</span><br><span class="line">27-Feb-2017 07:36:03.455 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corporation</span><br><span class="line">27-Feb-2017 07:36:03.456 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /home/Tomcat/apache-tomcat-8.5.11</span><br><span class="line">27-Feb-2017 07:36:03.456 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         /home/Tomcat/apache-tomcat-8.5.11</span><br><span class="line">27-Feb-2017 07:36:03.456 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.config.file=/home/Tomcat/apache-tomcat-8.5.11/conf/logging.properties</span><br><span class="line">27-Feb-2017 07:36:03.456 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager</span><br><span class="line">27-Feb-2017 07:36:03.456 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephemeralDHKeySize=2048</span><br><span class="line">27-Feb-2017 07:36:03.456 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources</span><br><span class="line">27-Feb-2017 07:36:03.456 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.base=/home/Tomcat/apache-tomcat-8.5.11</span><br><span class="line">27-Feb-2017 07:36:03.457 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.home=/home/Tomcat/apache-tomcat-8.5.11</span><br><span class="line">27-Feb-2017 07:36:03.457 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpdir=/home/Tomcat/apache-tomcat-8.5.11/temp</span><br><span class="line">27-Feb-2017 07:36:03.457 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib</span><br><span class="line">27-Feb-2017 07:36:03.621 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;http-nio-8080&quot;]</span><br><span class="line">27-Feb-2017 07:36:03.640 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for servlet write/read</span><br><span class="line">27-Feb-2017 07:36:03.643 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;ajp-nio-8009&quot;]</span><br><span class="line">27-Feb-2017 07:36:03.645 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for servlet write/read</span><br><span class="line">27-Feb-2017 07:36:03.646 INFO [main] org.apache.catalina.startup.Catalina.load Initialization processed in 581 ms</span><br><span class="line">27-Feb-2017 07:36:03.674 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service Catalina</span><br><span class="line">27-Feb-2017 07:36:03.674 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet Engine: Apache Tomcat/8.5.11</span><br><span class="line">27-Feb-2017 07:36:03.684 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/docs</span><br><span class="line">27-Feb-2017 07:36:04.039 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/docs has finished in 354 ms</span><br><span class="line">27-Feb-2017 07:36:04.040 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/ROOT</span><br><span class="line">27-Feb-2017 07:36:04.056 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/ROOT has finished in 16 ms</span><br><span class="line">27-Feb-2017 07:36:04.056 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/examples</span><br><span class="line">27-Feb-2017 07:36:04.279 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/examples has finished in 223 ms</span><br><span class="line">27-Feb-2017 07:36:04.279 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/manager</span><br><span class="line">27-Feb-2017 07:36:04.299 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/manager has finished in 20 ms</span><br><span class="line">27-Feb-2017 07:36:04.299 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/host-manager</span><br><span class="line">27-Feb-2017 07:36:04.312 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory /home/Tomcat/apache-tomcat-8.5.11/webapps/host-manager has finished in 13 ms</span><br><span class="line">27-Feb-2017 07:36:04.316 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [http-nio-8080]</span><br><span class="line">27-Feb-2017 07:36:04.323 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [ajp-nio-8009]</span><br><span class="line">27-Feb-2017 07:36:04.325 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 679 ms</span><br></pre></td></tr></table></figure>
<blockquote>
<p>启动完成后，在浏览器中访问宿主机的ip+端口，就可以访问通了<br><a href="http://localhost:8081" target="_blank" rel="noopener">http://localhost:8081</a></p>
</blockquote>
<h3 id="新的shell查看所有容器">新的shell查看所有容器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hexydeMacBook-Pro:tomcat hexy$ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                      COMMAND                  CREATED              STATUS                   PORTS                    NAMES</span><br><span class="line">8085c49f702f        hexyi/tomcat               &quot;/bin/sh -c &apos;/home...&quot;   About a minute ago   Up About a minute        0.0.0.0:8081-&gt;8080/tcp   tomcat8</span><br><span class="line">59f62ffe5a41        docker.io/learn/tutorial   &quot;/bin/bash&quot;              6 weeks ago          Exited (0) 6 weeks ago                            tutorial</span><br><span class="line">4a0745e1361f        learn/ping                 &quot;ping www.baidu.com&quot;     6 weeks ago          Exited (0) 6 weeks ago                            compassionate_ritchie</span><br><span class="line">4d3f84fcc741        learn/ping                 &quot;ping www.google.com&quot;    6 weeks ago          Exited (0) 6 weeks ago                            trusting_bhabha</span><br><span class="line">10cb35023177        learn/tutorial             &quot;apt-get install -...&quot;   6 weeks ago          Exited (0) 6 weeks ago                            stupefied_pare</span><br><span class="line">5fafecfe8507        learn/tutorial             &quot;echo &apos;hello world&apos;&quot;     6 weeks ago          Exited (0) 6 weeks ago                            boring_hawking</span><br><span class="line">hexydeMacBook-Pro:tomcat hexy$</span><br></pre></td></tr></table></figure>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-02-27</span><i class="fa fa-tag"></i><a href="/categories/work/" title="work" class="tag">work </a><a href="/tags/docker/" title="docker" class="tag">docker </a></div></div></div></div><div class="share"><div class="evernote"> <a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"> <a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"> <a href="http://twitter.com/home?status=,http://www.hexyi.net/2017/02/27/基于Dockfile搭建Java公共开发环境/,HEXYI,基于Dockfile搭建公共开发环境,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2017/02/27/Docker常用命令/" title="Docker常用命令" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2017/02/21/free-programming-books-zh-CN/" title="free-programming-books-zh_CN" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>